"Tel_Edit_Producao As screen.'phoneDetailEditLayout_ver3.0'":
    BackgroundImage: =Transmissões_foto_bw
    ImagePosition: =ImagePosition.Fill

    RectQuickActionBar3 As rectangle:
        Height: =88
        Width: =Parent.Width
        ZIndex: =1

    IconCancel1 As icon.Cancel:
        AccessibleLabel: =Self.Tooltip
        Height: =88
        Icon: =Icon.Cancel
        OnSelect: |-
            =ResetForm('Form Produção');
            Set(
                varselect,
                0
            );
            If(
                'Form Produção'.Mode <> FormMode.New,
                Back(),
                UpdateContext(
                    {
                        TelaAnterior: LookUp(
                            colRoleKeys,
                            Role = vartela
                        )
                    }
                );
                Navigate(TelaAnterior.Screen)
            )
        PaddingBottom: =22
        PaddingLeft: =22
        PaddingRight: =22
        PaddingTop: =22
        TabIndex: =0
        Tooltip: ="Cancelar item"
        Width: =88
        ZIndex: =2

    IconAccept1 As icon.Check:
        AccessibleLabel: =Self.Tooltip
        DisplayMode: |
            =If('Form Produção'.Mode <> FormMode.New , DisplayMode.Edit , If(varDelta < 0 || varprod_realizada <=0 || LabelAlertaDelta.Visible = true , DisplayMode.Disabled  ,DisplayMode.Edit))
        Height: =88
        Icon: =Icon.Check
        OnSelect: |-
            =Set(varenviado ,1);
            SubmitForm('Form Produção');
        PaddingBottom: =22
        PaddingLeft: =22
        PaddingRight: =22
        PaddingTop: =22
        TabIndex: =0
        Tooltip: ="Enviar item e retornar a página inicial"
        Width: =88
        X: =Parent.Width - Self.Width
        ZIndex: =3

    LblAppName3 As label:
        Fill: =RGBA(58, 58, 58, 0)
        Height: =88
        Size: =27
        Text: ="Lançamento Produção"
        Width: =Parent.Width - IconCancel1.Width - IconAccept1.Width
        Wrap: =false
        X: =80
        ZIndex: =4

    "'Form Produção' As form":
        DataSource: =[@LancamentoProducao]
        Height: =831
        Item: =BrowseGallery1.Selected
        OnSuccess: |-
            =//If(varenviado = 1; Navigate(TelaAnterior.Screen)) //; NewForm(Formperdas);;Navigate(Tel_Edit_Producao));;
            
            If(varenviado = 1,  NewForm('Form Produção') ; Navigate(Tel_Edit_Producao) , NewForm(Formperdas) ; Navigate(Tel_Edit_Producao))
        Width: =Parent.Width
        Y: =103
        ZIndex: =5

        IDPAI_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="Title"
            Default: =varIDpai
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"Title")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "Title")
            Required: =true
            Update: =DataCardidpai.Text
            Visible: =false
            Width: =640
            X: =0
            Y: =0
            ZIndex: =1

            DataCardKey9 As label:
                AutoHeight: =true
                Height: =48
                Size: =21
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardidpai As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Default: =varIDpai
                DelayOutput: =true
                DisplayMode: =Parent.DisplayMode
                Height: =70
                MaxLength: =Parent.MaxLength
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: =Parent.DisplayName
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey9.Y + DataCardKey9.Height + 5
                ZIndex: =2

            ErrorMessage1 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardidpai.Y + DataCardidpai.Height
                ZIndex: =3

            StarVisible1 As label:
                Align: =Align.Center
                Height: =DataCardKey9.Height
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey9.Y
                ZIndex: =4

        UTE_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="UTE"
            Default: =ThisItem.UTE
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"UTE")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "UTE")
            Required: =true
            Update: =DataCardute.Selected.Result
            Visible: =false
            Width: =640
            X: =0
            Y: =1
            ZIndex: =1

            ErrorMessage2 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardute.Y + DataCardute.Height
                ZIndex: =3

            StarVisible2 As label:
                Align: =Align.Center
                Height: =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

            DataCardute As combobox:
                DefaultSelectedItems: |-
                    =If( varselect = 0 , LookUp(Distinct(CreateMaquina,UTE).Result, Result = ThisItem.UTE) , LookUp(Distinct(CreateMaquina,UTE).Result, Result = varute))
                    
                    
                    //LookUp(Distinct(LancamentoProducao;UTE).Result; Result = ThisItem.UTE)
                DisplayFields: =["Result"]
                DisplayMode: =DisplayMode.View
                Height: =70
                InputTextPlaceholder: ="Selecione a UTE"
                IsSearchable: =false
                Items: |
                    =Sort(Distinct(CreateMaquina,UTE),Result)
                NoSelectionText: ="Selecione a UTE"
                OnChange: =Set(varIDpai,  Value(DataCardute.Selected.Result) & Value(DataCardmaquina.Selected.Result) & DataCardcolaborador.Text & DataCarddata.SelectedDate & DataCardhora_inicio.Selected.Result) ; Reset(DataCardsetor) ; Reset(DataCardtipo_de_peca) ; Reset(DataCardmaquina) ; Reset(DataCardoperacao) ; Reset(DataCardquantidade)
                OnSelect: |
                    =
                SearchFields: =["Result"]
                SearchItems: =[]
                SelectMultiple: =false
                Size: =21
                Width: =Parent.Width - 60
                X: =30
                Y: |
                    =
                ZIndex: =5

        SETOR_DataCard1 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="SETOR"
            Default: =ThisItem.SETOR
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"SETOR")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "SETOR")
            Required: =true
            Update: =DataCardsetor.Selected.Result
            Width: =640
            X: =0
            Y: =2
            ZIndex: =1

            ErrorMessage10 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardsetor.Y + DataCardsetor.Height
                ZIndex: =3

            StarVisible10 As label:
                Align: =Align.Center
                Height: =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

            DataCardsetor As combobox:
                DefaultSelectedItems: |
                    =If( varselect = 0 , LookUp(Distinct(CreateMaquina,SETOR).Result, Result = ThisItem.SETOR) , LookUp(Distinct(CreateMaquina,SETOR).Result, Result = varsetor))// Versão antiga -> If('Form Produção'.Mode <> FormMode.New ;{Value:SETOR_Card.Default})
                DisplayFields: =["Result"]
                DisplayMode: =DisplayMode.View
                Height: =70
                InputTextPlaceholder: ="Insira o Setor"
                IsSearchable: =false
                Items: =Sort(Distinct( Filter(CreateMaquina, Text(DataCardute.Selected.Result) in UTE) , SETOR ).Result , Result) // Distinct(CreateMaquina;SETOR)
                NoSelectionText: ="Insira o Setor"
                OnChange: =Reset(DataCardtipo_de_peca) ; Reset(DataCardmaquina) ; Reset(DataCardoperacao) 
                SearchFields: =["Result"]
                SearchItems: =[]
                SelectMultiple: =false
                Size: =21
                Width: =Parent.Width - 60
                X: =30
                Y: |
                    =
                ZIndex: =5

        OPERACAO_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="OPERA_x00c7__x00c3_O"
            Default: =ThisItem.OPERACAO
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"OPERA_x00c7__x00c3_O")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "OPERA_x00c7__x00c3_O")
            Required: =true
            Update: =DataCardoperacao.Selected.Result
            Width: =640
            X: =0
            Y: =3
            ZIndex: =1

            ErrorMessage3 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardoperacao.Y + DataCardoperacao.Height
                ZIndex: =3

            StarVisible3 As label:
                Align: =Align.Center
                Height: =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

            DataCardoperacao As combobox:
                DefaultSelectedItems: |
                    = If( varselect = 0 , LookUp(Distinct(CreateMaquina,OPERACAO).Result, Result = ThisItem.OPERACAO) , LookUp(Distinct(CreateMaquina,OPERACAO).Result, Result = varoperacao))
                DisplayFields: =["Result"]
                DisplayMode: =DisplayMode.View
                Height: =70
                InputTextPlaceholder: ="Insira a Operação"
                IsSearchable: =false
                Items: |
                    =Sort( Distinct( Filter(CreateMaquina, Text(DataCardsetor.Selected.Result) in SETOR , Text(DataCardute.Selected.Result) in UTE) , OPERACAO ).Result , Result) //Distinct(CreateMaquina;OPERACAO).Result
                NoSelectionText: ="Insira a Operação"
                OnChange: =Reset(DataCardtipo_de_peca) ; Reset(DataCardmaquina) ; 
                SearchFields: =["Result"]
                SearchItems: =[]
                SelectMultiple: =false
                Size: =21
                Width: =Parent.Width - 60
                X: =30
                Y: |
                    =
                ZIndex: =5

        MAQUINA_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="MAQUINA"
            Default: =ThisItem.MAQUINA
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"MAQUINA")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "MAQUINA")
            Required: =true
            Update: =DataCardmaquina.Selected.Result
            Width: =640
            X: =0
            Y: =4
            ZIndex: =1

            ErrorMessage6 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardmaquina.Y + DataCardmaquina.Height
                ZIndex: =3

            StarVisible6 As label:
                Align: =Align.Center
                Height: =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

            DataCardmaquina As combobox:
                DefaultSelectedItems: =If( varselect = 0 , LookUp(Distinct(CreateMaquina,CAF).Result, Result = ThisItem.MAQUINA) , LookUp(Distinct(CreateMaquina,CAF).Result, Result = varmaquina))
                DisplayFields: =["Result"]
                DisplayMode: =DisplayMode.View
                Height: =70
                InputTextPlaceholder: ="CAF Máquina - Somente Números"
                IsSearchable: =false
                Items: =Sort(Distinct( Filter(CreateMaquina, Text(DataCardsetor.Selected.Result) in SETOR , Text(DataCardute.Selected.Result) in UTE, Text(DataCardoperacao.Selected.Result) in OPERACAO) , CAF).Result , Result) //Distinct(CreateMaquina;CAF)
                NoSelectionText: ="CAF Máquina - Somente Números"
                OnChange: =Set(varIDpai,  Value(DataCardute.Selected.Result) & Value(DataCardmaquina.Selected.Result) & DataCardcolaborador.Text & DataCarddata.SelectedDate & DataCardhora_inicio.Selected.Result) ; Set(varDelta , CardProd_Prev - DataCardquantidade) ; Reset(DataCardquantidade) ; Set(varDelay,true) ; Reset(DataCardtipo_de_peca)
                SearchFields: =["Result"]
                SearchItems: =[]
                SelectMultiple: =false
                Size: =21
                Width: =Parent.Width - 60
                X: =30
                Y: |
                    =
                ZIndex: =5

        DATA_DataCard1 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            ContentLanguage: =""
            DataField: ="DATA"
            Default: =ThisItem.DATA
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"DATA")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "DATA")
            Required: =true
            Update: =DataCarddata.SelectedDate
            Width: =640
            X: =0
            Y: =5
            ZIndex: =1

            ErrorMessage9 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: |
                    =DataCarddata.Y + DataCarddata.Height
                ZIndex: =3

            StarVisible9 As label:
                Align: =Align.Center
                Height: =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

            DataCarddata As datepicker:
                DefaultDate: =If('Form Produção'.Mode <> FormMode.New ,DATA_Card.Default, If(Hour(Now()) > 0 , Today() , Today()-1))
                DisplayMode: =If('Form Produção'.Mode <> FormMode.New , DisplayMode.Disabled , DisplayMode.Edit)
                Height: =73
                OnChange: =Set(varIDpai,  Value(DataCardute.Selected.Result) & Value(DataCardmaquina.Selected.Result) & DataCardcolaborador.Text & DataCarddata.SelectedDate & DataCardhora_inicio.Selected.Result)
                Size: =24
                Width: =Parent.Width - 60
                X: =30
                Y: =
                ZIndex: =5

        HORA_INICIO_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="HORA_INICIO"
            Default: =
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"HORA_INICIO")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =75
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "HORA_INICIO")
            Required: =true
            Update: =DataCardhora_inicio.Selected.Result
            Width: =640
            X: =0
            Y: =6
            ZIndex: =1

            ErrorMessage4 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardhora_inicio.Y + DataCardhora_inicio.Height
                ZIndex: =3

            StarVisible4 As label:
                Align: =Align.Center
                Height: |
                    =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

            DataCardhora_inicio As combobox:
                DefaultSelectedItems: |
                    =If( varselect = 0, LookUp(Distinct(CreateHora,Hora).Result, Result = ThisItem.HORA_INICIO) ,  LookUp(Distinct(CreateHora,Hora).Result, Result = Last(Filter(LancamentoProducao , (MAQUINA = varmaquina) && (DATA = Text(DataCarddata.SelectedDate)))).HORA_INICIO))
                    
                     // Distinct(CreateHora;Hora).Result           LookUp(Distinct(LancamentoProducao;TIPO_DE_PECA).Result; Result = ThisItem.TIPO_DE_PECA)          If('Form Produção'.Mode <> FormMode.New ;{Value:HORA_INICIO_Card.Default})   LookUp(Distinct(LancamentoProducao;HORA_INICIO).Result; Result = ThisItem.HORA_INICIO)
                DisplayFields: =["Result"]
                DisplayMode: =If('Form Produção'.Mode <> FormMode.New , DisplayMode.Disabled , DisplayMode.Edit)
                Height: =70
                InputTextPlaceholder: ="Hora"
                Items: =Distinct(CreateHora,Hora)
                NoSelectionText: ="Hora Inicial"
                OnChange: |-
                    =Set(varIDpai,  Value(DataCardute.Selected.Result) & Value(DataCardmaquina.Selected.Result) & DataCardcolaborador.Text & DataCarddata.SelectedDate & DataCardhora_inicio.Selected.Result) ;
                    Set(varDelay , true);
                SearchFields: =["Result"]
                SearchItems: =Search(Distinct(CreateHora,Hora),DataCardhora_inicio.SearchText,"Result")
                SelectMultiple: =false
                Size: =21
                Width: =Parent.Width - 60
                X: =30
                Y: =
                ZIndex: =5

        COLABORADOR_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="COLABORADOR"
            Default: =ThisItem.COLABORADOR
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"COLABORADOR")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "COLABORADOR")
            Required: =true
            Update: =DataCardcolaborador.Text
            Width: =640
            X: =0
            Y: =7
            ZIndex: =1

            DataCardcolaborador As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Clear: =true
                Default: =If( varselect = 0 , If('Form Produção'.Mode <> FormMode.New ,COLABORADOR_Card.Default) , Last(Filter(LancamentoProducao , (MAQUINA = varmaquina) && (DATA = Text(DataCarddata.SelectedDate)))).COLABORADOR) // If('Form Produção'.Mode <> FormMode.New ;COLABORADOR_Card.Default)
                DelayOutput: =true
                DisplayMode: =Parent.DisplayMode
                Height: =70
                HintText: ="Registro Colaborador"
                MaxLength: =Parent.MaxLength
                OnChange: |-
                    =If(DataCardcolaborador.Text <> "" And
                          Value(DataCardcolaborador.Text) <> RoundDown(Value(DataCardcolaborador.Text),0),
                              Notify("Favor digitar apenas o número do Registro");
                              Reset(DataCardcolaborador)
                    )
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: =Parent.DisplayName
                VirtualKeyboardMode: =VirtualKeyboardMode.Numeric
                Width: =Parent.Width - 60
                X: =30
                Y: =
                ZIndex: =2

            ErrorMessage5 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardcolaborador.Y + DataCardcolaborador.Height
                ZIndex: =3

            StarVisible5 As label:
                Align: =Align.Center
                Height: |
                    =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: |
                    =
                ZIndex: =4

        TIPO_DE_PECA_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="TIPO_DE_PECA"
            Default: =ThisItem.TIPO_DE_PECA
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"TIPO_DE_PECA")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "TIPO_DE_PECA")
            Required: =true
            Update: =DataCardtipo_de_peca.Selected.Result
            Width: =640
            X: =0
            Y: =8
            ZIndex: =1

            ErrorMessage7 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardtipo_de_peca.Y + DataCardtipo_de_peca.Height
                ZIndex: =3

            StarVisible7 As label:
                Align: =Align.Center
                Height: =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: |
                    =
                ZIndex: =4

            DataCardtipo_de_peca As combobox:
                DefaultSelectedItems: =If( varselect = 0 , LookUp(Distinct(CreatePeca,PECA).Result, Result = ThisItem.TIPO_DE_PECA) , LookUp(Distinct(CreatePeca,PECA).Result, Result = Last(Filter(LancamentoProducao , (MAQUINA = varmaquina) && (DATA = Text(DataCarddata.SelectedDate)))).TIPO_DE_PECA))
                DisplayFields: =["Result"]
                Height: =70
                InputTextPlaceholder: ="Selecione o tipo de peças"
                Items: =listapeças
                NoSelectionText: ="Selecione o tipo de peças"
                OnSelect: =ClearCollect( listapeças , Sort( Distinct( Filter(CreatePeca, Text(DataCardsetor.Selected.Result) in SETOR , Text(DataCardute.Selected.Result) in UTE) , PECA).Result , Result))
                SearchFields: =["Result"]
                SearchItems: =Search(listapeças,DataCardtipo_de_peca.SearchText,"Result")
                SelectMultiple: =false
                Size: =21
                Width: =Parent.Width - 60
                X: =30
                Y: |
                    =
                ZIndex: =5

        QUANTIDADE_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            ContentLanguage: =""
            DataField: ="QUANTIDADE"
            Default: =ThisItem.QUANTIDADE
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"QUANTIDADE")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =178
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "QUANTIDADE")
            Required: =true
            Update: =DataCardquantidade.Text
            Width: =640
            X: =0
            Y: =9
            ZIndex: =1

            DataCardquantidade As text:
                Align: =Align.Center
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Default: |-
                    =If( varselect = 0 , If('Form Produção'.Mode <> FormMode.New , DataCardValue8.Text) , Last(Filter(CreateMaquina , (CAF = varmaquina))).CAPACIDADE - Sum(Filter(
                            LancamentoProducao,
                            ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                        ).QUANTIDADE , QUANTIDADE) - Sum(Filter(
                            LancamentoPerdas,
                            ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                        ).QUANTIDADE , QUANTIDADE))
                DelayOutput: =true
                DisplayMode: =If('Form Produção'.Mode <> FormMode.New , Disabled, DisplayMode.Edit)
                FontWeight: =FontWeight.Bold
                Height: =70
                HintText: ="Insira a quantidade produzida"
                MaxLength: =Parent.MaxLength
                OnChange: |-
                    =If(DataCardquantidade.Text <> "" And
                          Value(DataCardquantidade.Text) <> RoundDown(Value(DataCardquantidade.Text),0),
                              Notify("Favor digitar apenas números");
                              Reset(DataCardquantidade)
                    ); Set(varDelta , Cap_Produtiva - (DataCardquantidade + Sum( Sum(Filter(
                            LancamentoProducao,
                            ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                        ).QUANTIDADE , QUANTIDADE) + Sum(Filter(
                            LancamentoPerdas,
                            ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                        ).QUANTIDADE , QUANTIDADE)))) ;
                    
                    Set(varprod_realizada , Sum(DataCardquantidade - (Cap_Produtiva - Cap_Produtiva))) ;
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: =Parent.DisplayName
                VirtualKeyboardMode: =VirtualKeyboardMode.Numeric
                Width: =150
                X: =30
                Y: =86
                ZIndex: =2

            ErrorMessage8 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardquantidade.Y + DataCardquantidade.Height
                ZIndex: =3

            StarVisible8 As label:
                Align: =Align.Center
                Color: =RGBA(0, 0, 0, 1)
                Height: |
                    =
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: |
                    =
                ZIndex: =4

            Label_Prod_Realizada As label:
                Align: =Align.Center
                Fill: =RGBA(204, 204, 204, 1)
                FontWeight: =FontWeight.Bold
                Height: =80
                Size: =21
                Text: ="Prod. Realizada"
                Width: =DataCardquantidade.Width
                X: =DataCardquantidade.X
                ZIndex: =5

            Label_Prod_Prevista As label:
                Align: =Align.Center
                Fill: =RGBA(204, 204, 204, 1)
                FontWeight: =FontWeight.Bold
                Height: =80
                Size: =21
                Text: ="Prod. Prevista"
                Width: =DataCardquantidade.Width
                X: =CardProd_Prev.X
                ZIndex: =7

            CardProd_Delta As text:
                Align: =Align.Center
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Default: =varDelta 
                DelayOutput: =true
                DisplayMode: =DisplayMode.Disabled
                FontWeight: =FontWeight.Bold
                Format: =TextFormat.Number
                Height: =DataCardquantidade.Height
                HintText: ="Insira a quantidade produzida"
                MaxLength: =Parent.MaxLength
                OnChange: =
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                TabIndex: =-1
                Tooltip: =Parent.DisplayName
                Width: =DataCardquantidade.Width
                X: =CardProd_Prev.X + CardProd_Prev.Width + 65
                Y: =DataCardquantidade.Y
                ZIndex: =8

            Label_Delta As label:
                Align: =Align.Center
                Fill: =RGBA(204, 204, 204, 1)
                FontWeight: =FontWeight.Bold
                Height: =80
                Size: =21
                Text: ="Delta"
                Width: =DataCardquantidade.Width
                X: =CardProd_Delta.X
                ZIndex: =9

            CardProd_Prev As text:
                Align: =Align.Center
                Default: =Last(Filter(CreateMaquina , (CAF = varmaquina))).CAPACIDADE
                DisplayMode: =DisplayMode.Disabled
                FontWeight: =FontWeight.Bold
                Height: =DataCardquantidade.Height
                Size: =21
                Width: =DataCardquantidade.Width
                X: =DataCardquantidade.X + DataCardquantidade.Width + 65
                Y: =DataCardquantidade.Y
                ZIndex: =10

        ID_DataCard1 As typedDataCard.textualViewCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="ID"
            Default: =ThisItem.ID
            DisplayMode: =DisplayMode.View
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"ID")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =40
            Required: =false
            Visible: =false
            Width: =640
            X: =0
            Y: =10
            ZIndex: =1

            DataCardKey11 As label:
                AutoHeight: =true
                Height: =48
                Size: =21
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue10 As label:
                AutoHeight: =true
                DisplayMode: =Parent.DisplayMode
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =21
                Text: =Parent.Default
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey11.Y + DataCardKey11.Height + 5
                ZIndex: =2

        IDEspelho_DataCard1 As typedDataCard.numberEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="IDEspelho"
            Default: =If(IsBlank(ThisItem.ID),Max(Listaproducao,IDEspelho)+5000,ThisItem.ID)
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"IDEspelho")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            Required: =false
            Update: =If(IsBlank(ThisItem.ID),Max(Listaproducao,IDEspelho)+5000,ThisItem.ID)
            Visible: =false
            Width: =640
            X: =0
            Y: =11
            ZIndex: =1

            DataCardKey12 As label:
                AutoHeight: =true
                Height: =48
                Size: =21
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                ZIndex: =1

            DataCardValue11 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Default: =Parent.Default
                DelayOutput: =true
                DisplayMode: =Parent.DisplayMode
                Format: =TextFormat.Number
                Height: =70
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: =Parent.DisplayName
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey12.Y + DataCardKey12.Height + 5
                ZIndex: =2

            ErrorMessage17 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue11.Y + DataCardValue11.Height
                ZIndex: =3

            StarVisible17 As label:
                Align: =Align.Center
                Height: =DataCardKey12.Height
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey12.Y
                ZIndex: =4

        CAPACIDADE_DataCard2 As typedDataCard.textualEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="CAPACIDADE"
            Default: =ThisItem.CAPACIDADE
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@LancamentoProducao],DataSourceInfo.DisplayName,"CAPACIDADE")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@LancamentoProducao], DataSourceInfo.MaxLength, "CAPACIDADE")
            Required: =false
            Update: =DataCardValue15.Text
            Visible: =false
            Width: =640
            X: =0
            Y: =12
            ZIndex: =1

            DataCardKey16 As label:
                AutoHeight: =true
                Height: =48
                Size: =21
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue15 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Default: =Max(Filter( CreateMaquina , DataCardmaquina.Selected.Result = CAF).CAPACIDADE , CAPACIDADE)
                DelayOutput: =true
                DisplayMode: =Parent.DisplayMode
                Height: =70
                MaxLength: =Parent.MaxLength
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: =Parent.DisplayName
                Visible: =false
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey16.Y + DataCardKey16.Height + 5
                ZIndex: =2

            ErrorMessage20 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue15.Y + DataCardValue15.Height
                ZIndex: =3

            StarVisible20 As label:
                Align: =Align.Center
                Height: =DataCardKey16.Height
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey16.Y
                ZIndex: =4

    Gal_Producao_Maxima As gallery.galleryVertical:
        Height: =108
        Items: |
            =If('Form Produção'.Mode <> FormMode.New , Filter(CreateMaquina , DataCardmaquina.Selected.Result = CAF).CAPACIDADE , Filter( CreateMaquina , DataCardmaquina.Selected.Result = CAF).CAPACIDADE)
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TemplateSize: =103
        Visible: =false
        Width: =187
        X: =223
        Y: =826
        ZIndex: =6

        Cap_Produtiva As text:
            Align: =Align.Center
            Default: =ThisItem.CAPACIDADE
            DisplayMode: =DisplayMode.View
            Height: =70
            OnSelect: =Select(Parent)
            Size: =21
            Width: =144
            X: =33
            ZIndex: =1

    Timer1 As timer:
        AutoStart: =true
        Duration: =1500
        Height: =70
        OnTimerEnd: |-
            =Set(varDelta , Cap_Produtiva - (DataCardquantidade + Sum( Sum(Filter(
                    LancamentoProducao,
                    ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                ).QUANTIDADE , QUANTIDADE) + Sum(Filter(
                    LancamentoPerdas,
                    ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                ).QUANTIDADE , QUANTIDADE)))); 
                
                
            Set(varDelay,false) ;
            
            Set(varprod_realizada , Sum(DataCardquantidade - (Cap_Produtiva - Cap_Produtiva)))
        Repeat: =10
        Reset: =true
        Start: =varDelay
        Visible: =false
        Width: =280
        X: =360
        Y: =1060
        ZIndex: =7

    Btn_lancar_perda_1 As button:
        DisplayMode: =If('Form Produção'.Mode <> FormMode.New , DisplayMode.Disabled , If((varDelta <= 0 || varprod_realizada <0 ), DisplayMode.Disabled  ,DisplayMode.Edit))
        Height: =98
        OnSelect: |-
            =Set(varenviado ,0);
            If( varprod_realizada = 0, NewForm(Formperdas) ; Navigate(Tel_Edit_Perdas , SubmitForm('Form Produção') ),
            
            //NewForm(Formperdas);;
            //Navigate(Tel_Edit_Perdas));;
        Size: =24
        Text: ="Salvar e Lançar Perda"
        Tooltip: ="Enviar item e ir para página de lançamento perdas"
        Width: =584
        X: =30
        Y: =843
        ZIndex: =9

    Total_hora_produção As text:
        Align: =Align.Center
        Default: |+
            =Sum(Filter(
                    LancamentoProducao,
                    ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                ).QUANTIDADE , QUANTIDADE)
            
        DisplayMode: =DisplayMode.View
        Height: =63
        Size: =21
        Visible: =false
        Width: =132
        X: =35
        Y: =1060
        ZIndex: =10

    Total_hora_perdas As text:
        Align: =Align.Center
        Default: |+
            =Sum(Filter(
                    LancamentoPerdas,
                    ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                ).QUANTIDADE , QUANTIDADE)
            
        DisplayMode: =DisplayMode.View
        Height: =63
        Size: =21
        Visible: =false
        Width: =132
        X: =183
        Y: =1060
        ZIndex: =11

    Total_lancamento_hora As text:
        Align: =Align.Center
        Default: |
            =Sum( Sum(Filter(
                    LancamentoProducao,
                    ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                ).QUANTIDADE , QUANTIDADE) + Sum(Filter(
                    LancamentoPerdas,
                    ((MAQUINA = varmaquina)  && (DATA = Text(DataCarddata.SelectedDate)) && (HORA_INICIO = DataCardhora_inicio.Selected.Result)) 
                ).QUANTIDADE , QUANTIDADE))
        DisplayMode: =DisplayMode.View
        Height: =63
        Size: =21
        Visible: =false
        Width: =132
        X: =333
        Y: =1060
        ZIndex: =12

    Prod_realizada As text:
        Align: =Align.Center
        Default: =Sum(DataCardquantidade - (Cap_Produtiva - Cap_Produtiva))
        DisplayMode: =DisplayMode.View
        Height: =63
        OnChange: =Set(varDelay,true) ;
        Size: =21
        Visible: =false
        Width: =132
        X: =482
        Y: =1060
        ZIndex: =13

    Btn_lancar_perda_2 As button:
        DisplayMode: =If('Form Produção'.Mode <> FormMode.New , DisplayMode.Disabled  , If((varDelta < 0 || varprod_realizada <=0 ), DisplayMode.Disabled  ,DisplayMode.Edit))
        Height: =98
        OnSelect: |-
            =SubmitForm('Form Produção') ;
            Set(varenviado ,0);
            NewForm('Form Produção');
            Navigate(Tel_Edit_Producao)
        Size: =24
        Text: ="Adicionar nova produção"
        Tooltip: ="Enviar item e manter nesta página"
        Visible: =false
        Width: =280
        X: =334
        Y: =843
        ZIndex: =14

    Icon3 As icon.History:
        Color: =RGBA(255, 255, 255, 1)
        Height: =88
        Icon: =Icon.History
        OnSelect: =Set(varDelay , true)
        PaddingBottom: =15
        PaddingLeft: =15
        PaddingRight: =15
        PaddingTop: =15
        Width: =70
        X: =482
        ZIndex: =15

    LabelAlertaDelta As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Fill: =RGBA(255, 0, 0, 1)
        Height: =559
        Size: =21
        Text: |-
            ="Atenção!!!
            
            Favor pressionar o botão de atualizar ou altere a Prod. Realizada para 0.
            "
        Visible: =If(Total_lancamento_hora.Text = Last(Filter(CreateMaquina , (CAF = varmaquina))).CAPACIDADE && varDelta <> 0 && 'Form Produção'.Mode = FormMode.New , true , false)
        Width: =609
        X: =20
        Y: =103
        ZIndex: =16

